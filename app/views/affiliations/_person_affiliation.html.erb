<% affiliation = affiliation || record %>

<li class="affiliation-<%= affiliation.id %>">
  <%= link_to affiliation.institution.name, institution_path(affiliation.institution)%>
  <%= " - #{affiliation.function}" unless affiliation.function.blank? %>

  <button class="btn btn-light affiliation-<%= affiliation.id %>-edit <%= "d-none" if affiliation.function.blank? %>" type="button" data-toggle="collapse" data-target=".affiliation-<%= affiliation.id %>-edit-modal" aria-expanded="false" aria-controls="collapseExample">
    <%= fa_icon "edit" %>
  </button>
  <button class="btn btn-light affiliation-<%= affiliation.id %>-edit <%= "d-none" unless affiliation.function.blank? %>" type="button" data-toggle="collapse" data-target=".affiliation-<%= affiliation.id %>-edit-modal" aria-expanded="false" aria-controls="collapseExample">
    <%= fa_icon "plus" %>
  </button>
<div class="collapse affiliation-<%= affiliation.id %>-edit-modal">
  <div class="card card-body">
    <%= form_with model: affiliation, url: update_person_affiliation_path(affiliation), remote: true do |f| %>
      <%= f.label :function, "Funktion: " %>
      <%= f.text_field :function, class: "affiliation-#{affiliation.id}-function" %>
      <%= f.submit "Funktion aktualisieren", class: "btn btn-light" %>
    <% end %>
  </div>
</div>
</li>
