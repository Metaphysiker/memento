<div class="address-<%= address.id %>" >
  <div class="card my-3">
    <div class="card-body">

      <div class="float-right mb-3">

        <div class="btn-group" role="group" aria-label="Toolbar for Address">
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-light address-<%= address.id %>-edit" data-toggle="modal" data-target=".address-<%= address.id %>-edit-modal">
            <%= fa_icon "edit" %>
          </button>
        </div>
      </div>



      <h5 class="card-title">Adresse</h5>
      <p class="card-text">
        <% unless address.line1.blank? %>
          <%= address.line1 %> <br />
        <% end %>
        <% unless address.line2.blank? %>
          <%= address.line2 %> <br />
        <% end %>
        <% unless address.line3.blank? %>
          <%= address.line3 %> <br />
        <% end %>
        <% unless address.line4.blank? %>
          <%= address.line4 %> <br />
        <% end %>
        <% unless address.line5.blank? %>
          <%= address.line5 %> <br />
        <% end %>
        <% if address.addressable_type == "Person" && !address.addressable.form_of_address.blank? %>
          <%= address.addressable.form_of_address %>
        <% end %>
        <% if address.addressable_type == "Person" && !address.addressable.firstname.blank? && !address.addressable.lastname.blank? %>
          <%= address.addressable.firstname %> <%= address.addressable.lastname %> <br />
        <% end %>
        <% unless address.street.blank? %>
          <%= address.street %> <br />
        <% end %>
        <% unless address.plz.blank? && address.location.blank? %>
          <%= address.plz %>  <%= address.location %><br />
        <% end %>
        <% unless address.country.blank? || address.country_name == "Schweiz" %>
          <%= address.country_name %> <br />
        <% end %>
      </p>
      <hr />
        <%= render "shared/created_and_updated", parent: address %>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade address-<%= address.id %>-edit-modal" tabindex="-1" role="dialog" aria-labelledby="Edit Address" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Adresse bearbeiten</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="address-<%= address.id %>-edit-placeholder">
          </div>
          <%#= render "addresses/form", address: address %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Schliessen</button>
        </div>
      </div>
    </div>
  </div>

  <script>

    $( document ).ready(function() {

    $( ".address-<%= address.id %>-edit" ).click(function() {
        $.ajax({
          url: "/addresses/<%= address.id %>/edit.js",
          method: 'GET'
        }).done(function(response) {
        $(".address-<%= address.id %>-edit-placeholder").replaceWith(response);
      })
    });

    });

  </script>
</div>
